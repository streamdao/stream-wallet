{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { memo, useState } from 'react';\nimport { Background, ThemeButton } from \"../components\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInputRN from \"react-native-web/dist/exports/TextInput\";\nimport { theme } from \"../core/theme\";\nimport Modal from 'react-native-modal';\nvar colors = theme.colors,\n    _theme$fonts = theme.fonts,\n    Azeret_Mono = _theme$fonts.Azeret_Mono,\n    Nunito_Sans = _theme$fonts.Nunito_Sans;\nimport { accountFromSeed, mnemonicToSeed } from \"../utils/index\";\nimport { SubPageHeader } from \"../components\";\nimport { useStoreState } from \"../hooks/storeHooks\";\nimport { Token, TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { Wallet } from '@project-serum/anchor';\nimport { Connection, PublicKey } from '@solana/web3.js';\nimport { normalizeNumber } from \"../utils\";\nimport * as SecureStore from 'expo-secure-store';\n\nvar crypto = require('crypto');\n\nvar bip39 = require('bip39');\n\nimport * as web3 from '@solana/web3.js';\nimport * as spl from 'easy-spl';\nimport * as Haptics from 'expo-haptics';\nimport { BarCodeScanner } from 'expo-barcode-scanner';\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar SendScreen = function SendScreen(_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n  var token = route.params;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      modalVisible = _useState2[0],\n      setModalVisible = _useState2[1];\n\n  var _useState3 = useState('0'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      tradeAmount = _useState4[0],\n      setTradeAmount = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      recipientAddress = _useState6[0],\n      setRecipientAddress = _useState6[1];\n\n  var ownedTokens = useStoreState(function (state) {\n    return state.ownedTokens;\n  });\n  var allTokens = useStoreState(function (state) {\n    return state.allTokens;\n  });\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      filteredTo = _useState8[0],\n      setFilteredTo = _useState8[1];\n\n  var passcode = useStoreState(function (state) {\n    return state.passcode;\n  });\n  var selectedWallet = useStoreState(function (state) {\n    return state.selectedWallet;\n  }, function (prev, next) {\n    return prev.selectedWalle === next.selectedWallet;\n  });\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      scanned = _useState10[0],\n      setScanned = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      hasPermission = _useState12[0],\n      setHasPermission = _useState12[1];\n\n  function getPermission() {\n    var _await$BarCodeScanner, status;\n\n    return _regeneratorRuntime.async(function getPermission$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(BarCodeScanner.requestPermissionsAsync());\n\n          case 2:\n            _await$BarCodeScanner = _context.sent;\n            status = _await$BarCodeScanner.status;\n            console.log('status: ', status);\n            setHasPermission(status === 'granted');\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  var handleBarCodeScanned = function handleBarCodeScanned(_ref2) {\n    var type = _ref2.type,\n        data = _ref2.data;\n    setScanned(true);\n    alert(\"Bar code with type \" + type + \" and data \" + data + \" has been scanned!\");\n  };\n\n  function transferStuff() {\n    var url, connection, mnemonic, seed, fromWallet, toWallet, easySPLWallet, transaction, signature, myMint, transferAmount, result;\n    return _regeneratorRuntime.async(function transferStuff$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            url = 'https://solana--mainnet.datahub.figment.io/apikey/5d2d7ea54a347197ccc56fd24ecc2ac5';\n            connection = new Connection(url);\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(SecureStore.getItemAsync(passcode));\n\n          case 4:\n            mnemonic = _context2.sent;\n            _context2.next = 7;\n            return _regeneratorRuntime.awrap(mnemonicToSeed(mnemonic));\n\n          case 7:\n            seed = _context2.sent;\n            fromWallet = accountFromSeed(seed, 0, 'bip44', 0);\n            toWallet = new PublicKey(recipientAddress);\n            easySPLWallet = spl.Wallet.fromKeypair(connection, fromWallet);\n            console.log('price', token.price);\n\n            if (!(token.mint === 'So11111111111111111111111111111111111111112')) {\n              _context2.next = 18;\n              break;\n            }\n\n            transaction = new web3.Transaction().add(web3.SystemProgram.transfer({\n              fromPubkey: fromWallet.publicKey,\n              toPubkey: toWallet,\n              lamports: web3.LAMPORTS_PER_SOL / 100\n            }));\n            _context2.next = 16;\n            return _regeneratorRuntime.awrap(web3.sendAndConfirmTransaction(connection, transaction, [fromWallet]));\n\n          case 16:\n            signature = _context2.sent;\n            return _context2.abrupt(\"return\", console.log('SIGNATURE', signature));\n\n          case 18:\n            myMint = new web3.PublicKey(token.mint);\n\n            if (token.price > 0) {\n              transferAmount = parseFloat(tradeAmount) / token.price;\n            } else {\n              transferAmount = parseFloat(tradeAmount);\n            }\n\n            console.log('transferAmount: ', transferAmount);\n            _context2.next = 23;\n            return _regeneratorRuntime.awrap(easySPLWallet.transferToken(myMint, toWallet, transferAmount).catch(function (err) {\n              return console.log(err);\n            }));\n\n          case 23:\n            result = _context2.sent;\n\n            if (result) {\n              setModalVisible(false);\n              Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n              navigation.navigate('Send Success', {\n                toWallet: toWallet.toString('hex'),\n                tradeAmount: tradeAmount,\n                transferAmount: transferAmount,\n                token: token\n              });\n            }\n\n          case 25:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function initiateTransfer() {\n    var url, connection, mnemonic, seed, account, wallet;\n    return _regeneratorRuntime.async(function initiateTransfer$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            url = 'https://solana-api.projectserum.com';\n            connection = new Connection(url);\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(SecureStore.getItemAsync(passcode));\n\n          case 4:\n            mnemonic = _context3.sent;\n            _context3.next = 7;\n            return _regeneratorRuntime.awrap(mnemonicToSeed(mnemonic));\n\n          case 7:\n            seed = _context3.sent;\n            account = accountFromSeed(seed, 0, 'bip44', 0);\n            wallet = new Wallet(account);\n            transfer(token.mint, wallet, recipientAddress, connection, parseFloat(tradeAmount));\n\n          case 11:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function transfer(tokenMintAddress, wallet, to, connection, amount) {\n    var _web3$Transaction;\n\n    var mintPublicKey, mintToken, fromTokenAccount, destPublicKey, associatedDestinationTokenAddr, receiverAccount, instructions, transaction, signature;\n    return _regeneratorRuntime.async(function transfer$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            mintPublicKey = new web3.PublicKey(tokenMintAddress);\n            mintToken = new Token(connection, mintPublicKey, TOKEN_PROGRAM_ID, wallet.secretKey);\n            _context4.next = 4;\n            return _regeneratorRuntime.awrap(mintToken.getOrCreateAssociatedAccountInfo(wallet.publicKey).catch(function (err) {\n              return console.log('errorrr', err);\n            }));\n\n          case 4:\n            fromTokenAccount = _context4.sent;\n            console.log('fromTokenAccount: ', fromTokenAccount);\n            destPublicKey = new web3.PublicKey(to);\n            console.log('destPublicKey: ', destPublicKey);\n            _context4.next = 10;\n            return _regeneratorRuntime.awrap(Token.getAssociatedTokenAddress(mintToken.associatedProgramId, mintToken.programId, mintPublicKey, destPublicKey));\n\n          case 10:\n            associatedDestinationTokenAddr = _context4.sent;\n            console.log('associatedDestinationTokenAddr: ', associatedDestinationTokenAddr);\n            _context4.next = 14;\n            return _regeneratorRuntime.awrap(connection.getParsedAccountInfo(destPublicKey));\n\n          case 14:\n            receiverAccount = _context4.sent;\n            console.log('receiverAccount: ', receiverAccount);\n            instructions = [];\n\n            if (receiverAccount === null) {\n              instructions.push(Token.createAssociatedTokenAccountInstruction(mintToken.associatedProgramId, mintToken.programId, mintPublicKey, associatedDestinationTokenAddr, destPublicKey, wallet.publicKey));\n            }\n\n            instructions.push(Token.createTransferInstruction(TOKEN_PROGRAM_ID, token.associatedTokenAddress, associatedDestinationTokenAddr, wallet.publicKey, [], amount));\n            console.log('instructions: ', instructions);\n            transaction = (_web3$Transaction = new web3.Transaction()).add.apply(_web3$Transaction, instructions);\n            console.log('transaction: ', transaction);\n            transaction.feePayer = wallet.publicKey;\n            console.log('transaction.feePayer: ', transaction.feePayer);\n            _context4.next = 26;\n            return _regeneratorRuntime.awrap(connection.getRecentBlockhash());\n\n          case 26:\n            transaction.recentBlockhash = _context4.sent.blockhash;\n            console.log('transaction.recentBlockhash: ', transaction.recentBlockhash);\n            console.log('connection: ', connection);\n            console.log('transaction: ', transaction);\n            console.log('wallet: ', wallet);\n            _context4.next = 33;\n            return _regeneratorRuntime.awrap(web3.sendAndConfirmTransaction(connection, transaction, [wallet._keypair]));\n\n          case 33:\n            signature = _context4.sent;\n            console.log('signature: ', signature);\n            _context4.next = 37;\n            return _regeneratorRuntime.awrap(connection.confirmTransaction(signature));\n\n          case 37:\n            navigation.navigate('Send Success', {\n              tradeAmount: tradeAmount,\n              token: token,\n              recipientAddress: recipientAddress\n            });\n\n          case 38:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function addNumber(numberString) {\n    Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n\n    if (tradeAmount === '0') {\n      var replaceZero = tradeAmount.slice(0, -1);\n      var newAmount = replaceZero.concat(numberString);\n      setTradeAmount(newAmount);\n    } else {\n      var _newAmount = tradeAmount.concat(numberString);\n\n      setTradeAmount(_newAmount);\n    }\n  }\n\n  function removeNumber() {\n    Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n\n    if (tradeAmount.length === 1) {\n      setTradeAmount('0');\n    } else {\n      var newAmount = tradeAmount.slice(0, -1);\n      setTradeAmount(newAmount);\n    }\n  }\n\n  function renderSubtext() {\n    if (token.price === 0) {\n      return token.amount + \" \" + token.symbol + \" available\";\n    }\n\n    return \"$\" + normalizeNumber(token.amount * token.price) + \" available\";\n  }\n\n  return _jsxs(Background, {\n    dismissKeyboard: true,\n    children: [_jsxs(SubPageHeader, {\n      subText: renderSubtext(),\n      backButton: true,\n      children: [\"Send \", token.name, ' ']\n    }), console.log('token price: ', token.price), _jsx(View, {\n      children: _jsx(Text, {\n        style: _objectSpread(_objectSpread({}, styles.bigNumber), {}, {\n          alignSelf: 'center'\n        }),\n        children: token.price > 0 ? \"$\" + tradeAmount : tradeAmount\n      })\n    }), _jsxs(View, {\n      style: {\n        height: 64,\n        borderWidth: 1,\n        borderColor: theme.colors.black_seven,\n        borderRadius: 18,\n        padding: 16,\n        flexDirection: 'row',\n        alignItems: 'center'\n      },\n      children: [_jsx(Image, {\n        source: require(\"../assets/icons/wallet_plain.png\"),\n        style: {\n          width: 24,\n          height: 24,\n          marginRight: 8\n        }\n      }), _jsx(TextInputRN, {\n        style: _objectSpread(_objectSpread({\n          borderColor: 'black',\n          borderWidth: 0\n        }, theme.fonts.Nunito_Sans.Body_M_Regular), {}, {\n          flex: 1\n        }),\n        onChangeText: function onChangeText(text) {\n          return setRecipientAddress(text);\n        },\n        value: recipientAddress,\n        placeholder: \"Recipient's Wallet Address\",\n        keyboardType: \"default\"\n      })]\n    }), _jsxs(View, {\n      children: [_jsxs(View, {\n        style: styles.numRow,\n        children: [_jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return addNumber('1');\n          },\n          style: styles.numberContainer,\n          children: _jsx(Text, {\n            style: styles.mediumNumber,\n            children: \"1\"\n          })\n        }), _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return addNumber('2');\n          },\n          style: styles.numberContainer,\n          children: _jsx(Text, {\n            style: styles.mediumNumber,\n            children: \"2\"\n          })\n        }), _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return addNumber('3');\n          },\n          style: styles.numberContainer,\n          children: _jsx(Text, {\n            style: styles.mediumNumber,\n            children: \"3\"\n          })\n        })]\n      }), _jsxs(View, {\n        style: styles.numRow,\n        children: [_jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return addNumber('4');\n          },\n          style: styles.numberContainer,\n          children: _jsx(Text, {\n            style: styles.mediumNumber,\n            children: \"4\"\n          })\n        }), _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return addNumber('5');\n          },\n          style: styles.numberContainer,\n          children: _jsx(Text, {\n            style: styles.mediumNumber,\n            children: \"5\"\n          })\n        }), _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return addNumber('6');\n          },\n          style: styles.numberContainer,\n          children: _jsx(Text, {\n            style: styles.mediumNumber,\n            children: \"6\"\n          })\n        })]\n      }), _jsxs(View, {\n        style: styles.numRow,\n        children: [_jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return addNumber('7');\n          },\n          style: styles.numberContainer,\n          children: _jsx(Text, {\n            style: styles.mediumNumber,\n            children: \"7\"\n          })\n        }), _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return addNumber('8');\n          },\n          style: styles.numberContainer,\n          children: _jsx(Text, {\n            style: styles.mediumNumber,\n            children: \"8\"\n          })\n        }), _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return addNumber('9');\n          },\n          style: styles.numberContainer,\n          children: _jsx(Text, {\n            style: styles.mediumNumber,\n            children: \"9\"\n          })\n        })]\n      }), _jsxs(View, {\n        style: _objectSpread(_objectSpread({}, styles.numRow), {}, {\n          marginBottom: 0\n        }),\n        children: [_jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return addNumber('.');\n          },\n          style: styles.numberContainer,\n          children: _jsx(Text, {\n            style: styles.mediumNumber,\n            children: \".\"\n          })\n        }), _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return addNumber('0');\n          },\n          style: styles.numberContainer,\n          children: _jsx(Text, {\n            style: styles.mediumNumber,\n            children: \"0\"\n          })\n        }), _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return removeNumber();\n          },\n          style: styles.numberContainer,\n          children: _jsx(Image, {\n            source: require(\"../assets/icons/arrow-left-big.png\"),\n            style: {\n              width: 40,\n              height: 40\n            }\n          })\n        })]\n      })]\n    }), _jsx(View, {\n      style: {\n        marginBottom: 40\n      },\n      children: _jsxs(ThemeButton, {\n        onPress: function onPress() {\n          if (tradeAmount !== '0' && recipientAddress !== '') {\n            Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n            setModalVisible(true);\n            transferStuff();\n          }\n        },\n        children: [\"Send $\", tradeAmount]\n      })\n    }), _jsx(Modal, {\n      isVisible: modalVisible,\n      backdropColor: colors.black_two,\n      backdropOpacity: 0.35,\n      children: _jsxs(TouchableOpacity, {\n        onPress: function onPress() {\n          setModalVisible(false);\n        },\n        style: {\n          paddingHorizontal: 32,\n          paddingBottom: 32,\n          paddingTop: 8,\n          backgroundColor: '#111111',\n          borderRadius: 32,\n          width: 194,\n          alignItems: 'center',\n          alignSelf: 'center'\n        },\n        children: [_jsx(Image, {\n          source: require(\"../assets/images/logo_loader.png\"),\n          style: {\n            width: 110,\n            height: 114,\n            marginBottom: 2\n          }\n        }), _jsx(Text, {\n          style: styles.loaderLabel,\n          children: \"Sending...\"\n        })]\n      })\n    })]\n  });\n};\n\nvar styles = StyleSheet.create({\n  absoluteFillObject: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  },\n  tableLabel: {\n    fontSize: 14,\n    color: '#727D8D'\n  },\n  tableData: {\n    fontSize: 17,\n    color: colors.primary\n  },\n  bigNumber: {\n    fontSize: 84,\n    fontFamily: 'Nunito Sans',\n    fontWeight: '400',\n    color: colors.black_two\n  },\n  mediumNumber: {\n    fontSize: 48,\n    fontFamily: 'Nunito Sans',\n    fontWeight: '400',\n    color: colors.black_one\n  },\n  numberContainer: {\n    width: 56,\n    height: 66,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  toFrom: _objectSpread(_objectSpread({}, Nunito_Sans.Caption_M_Regular), {}, {\n    color: colors.black_five,\n    marginBottom: 4\n  }),\n  swapTokens: _objectSpread(_objectSpread({}, Nunito_Sans.Body_M_Regular), {}, {\n    color: colors.black_two\n  }),\n  swapContainer: {\n    borderColor: colors.border,\n    borderWidth: 1,\n    borderRadius: 18,\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  numRow: {\n    flexDirection: 'row',\n    alignSelf: 'stretch',\n    justifyContent: 'space-between',\n    marginHorizontal: 16,\n    marginBottom: 16\n  },\n  loaderLabel: {\n    fontFamily: 'AzeretMono_SemiBold',\n    color: 'white',\n    fontSize: 12\n  }\n});\nexport default memo(SendScreen);","map":{"version":3,"names":["React","memo","useState","Background","ThemeButton","theme","Modal","colors","fonts","Azeret_Mono","Nunito_Sans","accountFromSeed","mnemonicToSeed","SubPageHeader","useStoreState","Token","TOKEN_PROGRAM_ID","Wallet","Connection","PublicKey","normalizeNumber","SecureStore","crypto","require","bip39","web3","spl","Haptics","BarCodeScanner","SendScreen","navigation","route","token","params","modalVisible","setModalVisible","tradeAmount","setTradeAmount","recipientAddress","setRecipientAddress","ownedTokens","state","allTokens","filteredTo","setFilteredTo","passcode","selectedWallet","prev","next","selectedWalle","scanned","setScanned","hasPermission","setHasPermission","getPermission","requestPermissionsAsync","status","console","log","handleBarCodeScanned","type","data","alert","transferStuff","url","connection","getItemAsync","mnemonic","seed","fromWallet","toWallet","easySPLWallet","fromKeypair","price","mint","transaction","Transaction","add","SystemProgram","transfer","fromPubkey","publicKey","toPubkey","lamports","LAMPORTS_PER_SOL","sendAndConfirmTransaction","signature","myMint","transferAmount","parseFloat","transferToken","catch","err","result","notificationAsync","NotificationFeedbackType","Success","navigate","toString","initiateTransfer","account","wallet","tokenMintAddress","to","amount","mintPublicKey","mintToken","secretKey","getOrCreateAssociatedAccountInfo","fromTokenAccount","destPublicKey","getAssociatedTokenAddress","associatedProgramId","programId","associatedDestinationTokenAddr","getParsedAccountInfo","receiverAccount","instructions","push","createAssociatedTokenAccountInstruction","createTransferInstruction","associatedTokenAddress","feePayer","getRecentBlockhash","recentBlockhash","blockhash","_keypair","confirmTransaction","addNumber","numberString","impactAsync","ImpactFeedbackStyle","Light","replaceZero","slice","newAmount","concat","removeNumber","length","renderSubtext","symbol","name","styles","bigNumber","alignSelf","height","borderWidth","borderColor","black_seven","borderRadius","padding","flexDirection","alignItems","width","marginRight","Body_M_Regular","flex","text","numRow","numberContainer","mediumNumber","marginBottom","Medium","black_two","paddingHorizontal","paddingBottom","paddingTop","backgroundColor","loaderLabel","StyleSheet","create","absoluteFillObject","position","top","right","bottom","left","tableLabel","fontSize","color","tableData","primary","fontFamily","fontWeight","black_one","justifyContent","toFrom","Caption_M_Regular","black_five","swapTokens","swapContainer","border","marginHorizontal"],"sources":["/workspace/stream-wallet/screens/SendScreen.tsx"],"sourcesContent":["import React, { memo, useState, useEffect } from 'react';\nimport { Background, ThemeButton } from '../components';\nimport { Navigation } from '../types';\nimport {\n\tText,\n\tView,\n\tImage,\n\tStyleSheet,\n\tTouchableOpacity,\n\tTextInput as TextInputRN,\n} from 'react-native';\nimport { theme } from '../core/theme';\nimport Modal from 'react-native-modal';\nconst {\n\tcolors,\n\tfonts: { Azeret_Mono, Nunito_Sans },\n} = theme;\nimport { accountFromSeed, mnemonicToSeed } from '../utils/index';\nimport { SubPageHeader } from '../components';\nimport { useStoreState, useStoreActions } from '../hooks/storeHooks';\nimport { Token, TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { Wallet } from '@project-serum/anchor';\nimport { Account, Connection, PublicKey, Keypair } from '@solana/web3.js';\nimport {\n\tfindAssociatedTokenAddress,\n\tgetAccountFromSeed,\n\tDERIVATION_PATH,\n\tnormalizeNumber,\n\tderiveSeed2,\n} from '../utils';\nimport * as SecureStore from 'expo-secure-store';\n// import * as ed25519 from 'ed25519-hd-key';\nimport nacl from 'tweetnacl';\nimport { utils } from 'ethers';\nvar crypto = require('crypto');\nvar bip39 = require('bip39');\nimport * as web3 from '@solana/web3.js';\nimport * as splToken from '@solana/spl-token';\nimport * as spl from 'easy-spl';\nimport * as Haptics from 'expo-haptics';\nimport { BarCodeScanner } from 'expo-barcode-scanner';\n\ntype Props = {\n\tnavigation: Navigation;\n\troute: Object;\n};\n\nconst SendScreen = ({ navigation, route }: Props) => {\n\tconst token = route.params;\n\tconst [modalVisible, setModalVisible] = useState(false);\n\tconst [tradeAmount, setTradeAmount] = useState('0');\n\tconst [recipientAddress, setRecipientAddress] = useState('');\n\tconst ownedTokens = useStoreState((state) => state.ownedTokens);\n\tconst allTokens = useStoreState((state) => state.allTokens);\n\tconst [filteredTo, setFilteredTo] = useState('');\n\tconst passcode = useStoreState((state) => state.passcode);\n\tconst selectedWallet = useStoreState(\n\t\t(state) => state.selectedWallet,\n\t\t(prev, next) => prev.selectedWalle === next.selectedWallet,\n\t);\n\tconst [scanned, setScanned] = useState(false);\n\tconst [hasPermission, setHasPermission] = useState(null);\n\n\t// async function findAssociatedTokenAddress(\n\t// \twalletAddress: PublicKey,\n\t// \ttokenMintAddress: PublicKey,\n\t// ): Promise<PublicKey> {\n\t// \treturn (\n\t// \t\tawait PublicKey.findProgramAddress(\n\t// \t\t\t[\n\t// \t\t\t\twalletAddress.toBuffer(),\n\t// \t\t\t\tTOKEN_PROGRAM_ID.toBuffer(),\n\t// \t\t\t\ttokenMintAddress.toBuffer(),\n\t// \t\t\t],\n\t// \t\t\tSPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n\t// \t\t)\n\t// \t)[0];\n\t// }\n\n\tasync function getPermission() {\n\t\tconst { status } = await BarCodeScanner.requestPermissionsAsync();\n\t\tconsole.log('status: ', status);\n\t\tsetHasPermission(status === 'granted');\n\t}\n\n\tconst handleBarCodeScanned = ({ type, data }) => {\n\t\tsetScanned(true);\n\t\talert(`Bar code with type ${type} and data ${data} has been scanned!`);\n\t};\n\n\tasync function transferStuff() {\n\t\tconst url =\n\t\t\t'https://solana--mainnet.datahub.figment.io/apikey/5d2d7ea54a347197ccc56fd24ecc2ac5';\n\t\tconst connection = new Connection(url);\n\n\t\tlet mnemonic = await SecureStore.getItemAsync(passcode);\n\t\tconst seed = await mnemonicToSeed(mnemonic);\n\t\tconst fromWallet = accountFromSeed(seed, 0, 'bip44', 0);\n\t\tconst toWallet = new PublicKey(recipientAddress);\n\t\tconst easySPLWallet = spl.Wallet.fromKeypair(connection, fromWallet);\n\n\t\tconsole.log('price', token.price);\n\n\t\tif (token.mint === 'So11111111111111111111111111111111111111112') {\n\t\t\tconst transaction = new web3.Transaction().add(\n\t\t\t\tweb3.SystemProgram.transfer({\n\t\t\t\t\tfromPubkey: fromWallet.publicKey,\n\t\t\t\t\ttoPubkey: toWallet,\n\t\t\t\t\tlamports: web3.LAMPORTS_PER_SOL / 100,\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\t// Sign transaction, broadcast, and confirm\n\t\t\tconst signature = await web3.sendAndConfirmTransaction(\n\t\t\t\tconnection,\n\t\t\t\ttransaction,\n\t\t\t\t[fromWallet],\n\t\t\t);\n\t\t\treturn console.log('SIGNATURE', signature);\n\t\t}\n\t\t// create accounts and wallets\n\n\t\t// Construct my token class\n\t\tvar myMint = new web3.PublicKey(token.mint);\n\n\t\tlet transferAmount;\n\t\tif (token.price > 0) {\n\t\t\ttransferAmount = parseFloat(tradeAmount) / token.price;\n\t\t} else {\n\t\t\ttransferAmount = parseFloat(tradeAmount);\n\t\t}\n\n\t\tconsole.log('transferAmount: ', transferAmount);\n\n\t\tconst result = await easySPLWallet\n\t\t\t.transferToken(myMint, toWallet, transferAmount)\n\t\t\t.catch((err) => console.log(err));\n\n\t\tif (result) {\n\t\t\tsetModalVisible(false);\n\t\t\tHaptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n\t\t\tnavigation.navigate('Send Success', {\n\t\t\t\ttoWallet: toWallet.toString('hex'),\n\t\t\t\ttradeAmount,\n\t\t\t\ttransferAmount,\n\t\t\t\ttoken,\n\t\t\t});\n\t\t}\n\t}\n\n\tasync function initiateTransfer() {\n\t\tconst url = 'https://solana-api.projectserum.com';\n\t\tconst connection = new Connection(url);\n\n\t\tlet mnemonic = await SecureStore.getItemAsync(passcode);\n\t\tconst seed = await mnemonicToSeed(mnemonic);\n\t\tconst account = accountFromSeed(seed, 0, 'bip44', 0);\n\n\t\tconst wallet = new Wallet(account);\n\n\t\ttransfer(\n\t\t\ttoken.mint,\n\t\t\twallet,\n\t\t\trecipientAddress,\n\t\t\tconnection,\n\t\t\tparseFloat(tradeAmount),\n\t\t);\n\t}\n\n\tasync function transfer(\n\t\ttokenMintAddress: string,\n\t\twallet,\n\t\tto: string,\n\t\tconnection: web3.Connection,\n\t\tamount: number,\n\t) {\n\t\tconst mintPublicKey = new web3.PublicKey(tokenMintAddress);\n\t\tconst mintToken = new Token(\n\t\t\tconnection,\n\t\t\tmintPublicKey,\n\t\t\tTOKEN_PROGRAM_ID,\n\t\t\twallet.secretKey, // the wallet owner will pay to transfer and to create recipients associated token account if it does not yet exist.\n\t\t);\n\n\t\tconst fromTokenAccount = await mintToken\n\t\t\t.getOrCreateAssociatedAccountInfo(wallet.publicKey)\n\t\t\t.catch((err) => console.log('errorrr', err));\n\t\tconsole.log('fromTokenAccount: ', fromTokenAccount);\n\n\t\tconst destPublicKey = new web3.PublicKey(to);\n\t\tconsole.log('destPublicKey: ', destPublicKey);\n\n\t\t// Get the delivery address of the destination wallet which will hold the custom token\n\t\tconst associatedDestinationTokenAddr =\n\t\t\tawait Token.getAssociatedTokenAddress(\n\t\t\t\tmintToken.associatedProgramId,\n\t\t\t\tmintToken.programId,\n\t\t\t\tmintPublicKey,\n\t\t\t\tdestPublicKey,\n\t\t\t);\n\n\t\tconsole.log(\n\t\t\t'associatedDestinationTokenAddr: ',\n\t\t\tassociatedDestinationTokenAddr,\n\t\t);\n\t\tconst receiverAccount = await connection.getParsedAccountInfo(\n\t\t\tdestPublicKey,\n\t\t);\n\t\tconsole.log('receiverAccount: ', receiverAccount);\n\n\t\tconst instructions: web3.TransactionInstruction[] = [];\n\n\t\tif (receiverAccount === null) {\n\t\t\tinstructions.push(\n\t\t\t\tToken.createAssociatedTokenAccountInstruction(\n\t\t\t\t\tmintToken.associatedProgramId,\n\t\t\t\t\tmintToken.programId,\n\t\t\t\t\tmintPublicKey,\n\t\t\t\t\tassociatedDestinationTokenAddr,\n\t\t\t\t\tdestPublicKey,\n\t\t\t\t\twallet.publicKey,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\tinstructions.push(\n\t\t\tToken.createTransferInstruction(\n\t\t\t\tTOKEN_PROGRAM_ID,\n\t\t\t\ttoken.associatedTokenAddress,\n\t\t\t\tassociatedDestinationTokenAddr,\n\t\t\t\twallet.publicKey,\n\t\t\t\t[],\n\t\t\t\tamount,\n\t\t\t),\n\t\t);\n\t\tconsole.log('instructions: ', instructions);\n\n\t\tconst transaction = new web3.Transaction().add(...instructions);\n\t\tconsole.log('transaction: ', transaction);\n\t\ttransaction.feePayer = wallet.publicKey;\n\t\tconsole.log('transaction.feePayer: ', transaction.feePayer);\n\t\ttransaction.recentBlockhash = (\n\t\t\tawait connection.getRecentBlockhash()\n\t\t).blockhash;\n\t\tconsole.log(\n\t\t\t'transaction.recentBlockhash: ',\n\t\t\ttransaction.recentBlockhash,\n\t\t);\n\n\t\tconsole.log('connection: ', connection);\n\t\tconsole.log('transaction: ', transaction);\n\t\tconsole.log('wallet: ', wallet);\n\t\tvar signature = await web3.sendAndConfirmTransaction(\n\t\t\tconnection,\n\t\t\ttransaction,\n\t\t\t[wallet._keypair],\n\t\t);\n\t\tconsole.log('signature: ', signature);\n\n\t\t// const transactionSignature = await connection\n\t\t// \t.sendRawTransaction(transaction.serialize(), {\n\t\t// \t\tskipPreflight: true,\n\t\t// \t})\n\t\t// \t.catch((err) => console.log('erororor', err));\n\t\t// console.log('transactionSignature: ', transactionSignature);\n\n\t\tawait connection.confirmTransaction(signature);\n\n\t\tnavigation.navigate('Send Success', {\n\t\t\ttradeAmount,\n\t\t\ttoken,\n\t\t\trecipientAddress,\n\t\t});\n\t}\n\n\tfunction addNumber(numberString: string) {\n\t\tHaptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n\t\tif (tradeAmount === '0') {\n\t\t\tconst replaceZero = tradeAmount.slice(0, -1);\n\t\t\tconst newAmount = replaceZero.concat(numberString);\n\t\t\tsetTradeAmount(newAmount);\n\t\t} else {\n\t\t\tconst newAmount = tradeAmount.concat(numberString);\n\t\t\tsetTradeAmount(newAmount);\n\t\t}\n\t}\n\n\tfunction removeNumber() {\n\t\tHaptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n\t\tif (tradeAmount.length === 1) {\n\t\t\tsetTradeAmount('0');\n\t\t} else {\n\t\t\tconst newAmount = tradeAmount.slice(0, -1);\n\t\t\tsetTradeAmount(newAmount);\n\t\t}\n\t}\n\n\tfunction renderSubtext() {\n\t\tif (token.price === 0) {\n\t\t\treturn `${token.amount} ${token.symbol} available`;\n\t\t}\n\t\treturn `$${normalizeNumber(token.amount * token.price)} available`;\n\t}\n\n\treturn (\n\t\t<Background dismissKeyboard={true}>\n\t\t\t<SubPageHeader subText={renderSubtext()} backButton>\n\t\t\t\tSend {token.name}{' '}\n\t\t\t</SubPageHeader>\n\t\t\t{console.log('token price: ', token.price)}\n\t\t\t<View>\n\t\t\t\t<Text style={{ ...styles.bigNumber, alignSelf: 'center' }}>\n\t\t\t\t\t{token.price > 0 ? `$${tradeAmount}` : tradeAmount}\n\t\t\t\t</Text>\n\t\t\t</View>\n\t\t\t<View\n\t\t\t\tstyle={{\n\t\t\t\t\theight: 64,\n\t\t\t\t\tborderWidth: 1,\n\t\t\t\t\tborderColor: theme.colors.black_seven,\n\t\t\t\t\tborderRadius: 18,\n\t\t\t\t\tpadding: 16,\n\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\talignItems: 'center',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Image\n\t\t\t\t\tsource={require('../assets/icons/wallet_plain.png')}\n\t\t\t\t\tstyle={{ width: 24, height: 24, marginRight: 8 }}\n\t\t\t\t/>\n\n\t\t\t\t<TextInputRN\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tborderColor: 'black',\n\t\t\t\t\t\tborderWidth: 0,\n\t\t\t\t\t\t...theme.fonts.Nunito_Sans.Body_M_Regular,\n\t\t\t\t\t\tflex: 1,\n\t\t\t\t\t}}\n\t\t\t\t\tonChangeText={(text: string) => setRecipientAddress(text)}\n\t\t\t\t\tvalue={recipientAddress}\n\t\t\t\t\tplaceholder=\"Recipient's Wallet Address\"\n\t\t\t\t\tkeyboardType=\"default\"\n\t\t\t\t/>\n\t\t\t</View>\n\t\t\t{/* <TouchableOpacity\n\t\t\t\tonPress={() => {\n\t\t\t\t\tnavigation.navigate('QR Scan');\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Text>Test</Text>\n\t\t\t</TouchableOpacity> */}\n\t\t\t<View>\n\t\t\t\t<View style={styles.numRow}>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\tonPress={() => addNumber('1')}\n\t\t\t\t\t\tstyle={styles.numberContainer}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text style={styles.mediumNumber}>1</Text>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\tonPress={() => addNumber('2')}\n\t\t\t\t\t\tstyle={styles.numberContainer}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text style={styles.mediumNumber}>2</Text>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\tonPress={() => addNumber('3')}\n\t\t\t\t\t\tstyle={styles.numberContainer}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text style={styles.mediumNumber}>3</Text>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t</View>\n\t\t\t\t<View style={styles.numRow}>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\tonPress={() => addNumber('4')}\n\t\t\t\t\t\tstyle={styles.numberContainer}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text style={styles.mediumNumber}>4</Text>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\tonPress={() => addNumber('5')}\n\t\t\t\t\t\tstyle={styles.numberContainer}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text style={styles.mediumNumber}>5</Text>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\tonPress={() => addNumber('6')}\n\t\t\t\t\t\tstyle={styles.numberContainer}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text style={styles.mediumNumber}>6</Text>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t</View>\n\t\t\t\t<View style={styles.numRow}>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\tonPress={() => addNumber('7')}\n\t\t\t\t\t\tstyle={styles.numberContainer}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text style={styles.mediumNumber}>7</Text>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\tonPress={() => addNumber('8')}\n\t\t\t\t\t\tstyle={styles.numberContainer}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text style={styles.mediumNumber}>8</Text>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\tonPress={() => addNumber('9')}\n\t\t\t\t\t\tstyle={styles.numberContainer}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text style={styles.mediumNumber}>9</Text>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t</View>\n\t\t\t\t<View style={{ ...styles.numRow, marginBottom: 0 }}>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\tonPress={() => addNumber('.')}\n\t\t\t\t\t\tstyle={styles.numberContainer}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text style={styles.mediumNumber}>.</Text>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\tonPress={() => addNumber('0')}\n\t\t\t\t\t\tstyle={styles.numberContainer}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text style={styles.mediumNumber}>0</Text>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\tonPress={() => removeNumber()}\n\t\t\t\t\t\tstyle={styles.numberContainer}\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* <Text style={styles.mediumNumber}>3</Text> */}\n\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\tsource={require('../assets/icons/arrow-left-big.png')}\n\t\t\t\t\t\t\tstyle={{ width: 40, height: 40 }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t</View>\n\t\t\t</View>\n\t\t\t<View style={{ marginBottom: 40 }}>\n\t\t\t\t<ThemeButton\n\t\t\t\t\tonPress={() => {\n\t\t\t\t\t\tif (tradeAmount !== '0' && recipientAddress !== '') {\n\t\t\t\t\t\t\tHaptics.impactAsync(\n\t\t\t\t\t\t\t\tHaptics.ImpactFeedbackStyle.Medium,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tsetModalVisible(true);\n\t\t\t\t\t\t\ttransferStuff();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tSend ${tradeAmount}\n\t\t\t\t</ThemeButton>\n\t\t\t</View>\n\t\t\t<Modal\n\t\t\t\tisVisible={modalVisible}\n\t\t\t\tbackdropColor={colors.black_two}\n\t\t\t\tbackdropOpacity={0.35}\n\t\t\t\t// onBackdropPress={() => setModalVisible(false)}\n\t\t\t>\n\t\t\t\t<TouchableOpacity\n\t\t\t\t\tonPress={() => {\n\t\t\t\t\t\tsetModalVisible(false);\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tpaddingHorizontal: 32,\n\t\t\t\t\t\tpaddingBottom: 32,\n\t\t\t\t\t\tpaddingTop: 8,\n\t\t\t\t\t\tbackgroundColor: '#111111',\n\t\t\t\t\t\tborderRadius: 32,\n\t\t\t\t\t\twidth: 194,\n\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\talignSelf: 'center',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Image\n\t\t\t\t\t\tsource={require('../assets/images/logo_loader.png')}\n\t\t\t\t\t\tstyle={{ width: 110, height: 114, marginBottom: 2 }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Text style={styles.loaderLabel}>Sending...</Text>\n\t\t\t\t</TouchableOpacity>\n\t\t\t</Modal>\n\t\t</Background>\n\t);\n};\n\nconst styles = StyleSheet.create({\n\tabsoluteFillObject: {\n\t\tposition: 'absolute',\n\t\ttop: 0,\n\t\tright: 0,\n\t\tbottom: 0,\n\t\tleft: 0,\n\t},\n\ttableLabel: {\n\t\tfontSize: 14,\n\t\tcolor: '#727D8D',\n\t},\n\ttableData: {\n\t\tfontSize: 17,\n\t\tcolor: colors.primary,\n\t},\n\tbigNumber: {\n\t\tfontSize: 84,\n\t\tfontFamily: 'Nunito Sans',\n\t\tfontWeight: '400',\n\t\tcolor: colors.black_two,\n\t},\n\tmediumNumber: {\n\t\tfontSize: 48,\n\t\tfontFamily: 'Nunito Sans',\n\t\tfontWeight: '400',\n\t\tcolor: colors.black_one,\n\t},\n\tnumberContainer: {\n\t\twidth: 56,\n\t\theight: 66,\n\t\tjustifyContent: 'center',\n\t\talignItems: 'center',\n\t},\n\ttoFrom: {\n\t\t...Nunito_Sans.Caption_M_Regular,\n\t\tcolor: colors.black_five,\n\t\tmarginBottom: 4,\n\t},\n\tswapTokens: {\n\t\t...Nunito_Sans.Body_M_Regular,\n\t\tcolor: colors.black_two,\n\t},\n\tswapContainer: {\n\t\tborderColor: colors.border,\n\t\tborderWidth: 1,\n\t\tborderRadius: 18,\n\t\twidth: 40,\n\t\theight: 40,\n\t\tjustifyContent: 'center',\n\t\talignItems: 'center',\n\t},\n\tnumRow: {\n\t\tflexDirection: 'row',\n\t\talignSelf: 'stretch',\n\t\tjustifyContent: 'space-between',\n\t\tmarginHorizontal: 16,\n\t\tmarginBottom: 16,\n\t},\n\tloaderLabel: {\n\t\tfontFamily: 'AzeretMono_SemiBold',\n\t\tcolor: 'white',\n\t\tfontSize: 12,\n\t},\n});\n\nexport default memo(SendScreen);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}