{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React, { PureComponent } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport PropTypes from 'prop-types';\nimport * as shape from 'd3-shape';\nimport Path from \"./animated-path\";\nimport Svg, { G } from 'react-native-svg';\n\nvar ProgressCircle = function (_PureComponent) {\n  _inherits(ProgressCircle, _PureComponent);\n\n  var _super = _createSuper(ProgressCircle);\n\n  function ProgressCircle() {\n    var _this;\n\n    _classCallCheck(this, ProgressCircle);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      height: 0,\n      width: 0\n    });\n\n    return _this;\n  }\n\n  _createClass(ProgressCircle, [{\n    key: \"_onLayout\",\n    value: function _onLayout(event) {\n      var _event$nativeEvent$la = event.nativeEvent.layout,\n          height = _event$nativeEvent$la.height,\n          width = _event$nativeEvent$la.width;\n      this.setState({\n        height: height,\n        width: width\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          style = _this$props.style,\n          progressColor = _this$props.progressColor,\n          backgroundColor = _this$props.backgroundColor,\n          strokeWidth = _this$props.strokeWidth,\n          startAngle = _this$props.startAngle,\n          endAngle = _this$props.endAngle,\n          animate = _this$props.animate,\n          animateDuration = _this$props.animateDuration,\n          children = _this$props.children,\n          cornerRadius = _this$props.cornerRadius;\n      var progress = this.props.progress;\n      var _this$state = this.state,\n          height = _this$state.height,\n          width = _this$state.width;\n      var outerDiameter = Math.min(width, height);\n\n      if (!isFinite(progress) || isNaN(progress)) {\n        progress = 0;\n      }\n\n      var data = [{\n        key: 'rest',\n        value: 1 - progress,\n        color: backgroundColor\n      }, {\n        key: 'progress',\n        value: progress,\n        color: progressColor\n      }];\n      var pieSlices = shape.pie().value(function (d) {\n        return d.value;\n      }).sort(function (a) {\n        return a.key === 'rest' ? 1 : -1;\n      }).startAngle(startAngle).endAngle(endAngle)(data);\n      var arcs = pieSlices.map(function (slice, index) {\n        return _objectSpread({}, data[index], {}, slice, {\n          path: shape.arc().outerRadius(outerDiameter / 2).innerRadius(outerDiameter / 2 - strokeWidth).startAngle(index === 0 ? startAngle : slice.startAngle).endAngle(index === 0 ? endAngle : slice.endAngle).cornerRadius(cornerRadius)()\n        });\n      });\n      var extraProps = {\n        width: width,\n        height: height\n      };\n      return React.createElement(View, {\n        style: style,\n        onLayout: function onLayout(event) {\n          return _this2._onLayout(event);\n        }\n      }, height > 0 && width > 0 && React.createElement(Svg, {\n        style: {\n          height: height,\n          width: width\n        }\n      }, React.createElement(G, {\n        x: width / 2,\n        y: height / 2\n      }, React.Children.map(children, function (child) {\n        if (child && child.props.belowChart) {\n          return React.cloneElement(child, extraProps);\n        }\n\n        return null;\n      }), arcs.map(function (shape, index) {\n        return React.createElement(Path, {\n          key: index,\n          fill: shape.color,\n          d: shape.path,\n          animate: animate,\n          animationDuration: animateDuration\n        });\n      }), React.Children.map(children, function (child) {\n        if (child && !child.props.belowChart) {\n          return React.cloneElement(child, extraProps);\n        }\n\n        return null;\n      }))));\n    }\n  }]);\n\n  return ProgressCircle;\n}(PureComponent);\n\nProgressCircle.propTypes = {\n  progress: PropTypes.number.isRequired,\n  style: PropTypes.any,\n  progressColor: PropTypes.any,\n  backgroundColor: PropTypes.any,\n  strokeWidth: PropTypes.number,\n  startAngle: PropTypes.number,\n  endAngle: PropTypes.number,\n  animate: PropTypes.bool,\n  cornerRadius: PropTypes.number,\n  animateDuration: PropTypes.number\n};\nProgressCircle.defaultProps = {\n  progressColor: 'black',\n  backgroundColor: '#ECECEC',\n  strokeWidth: 5,\n  startAngle: 0,\n  endAngle: Math.PI * 2,\n  cornerRadius: 45\n};\nexport default ProgressCircle;","map":{"version":3,"sources":["progress-circle.js"],"names":["height","width","_onLayout","nativeEvent","layout","render","cornerRadius","progress","outerDiameter","Math","isFinite","isNaN","data","key","value","color","backgroundColor","progressColor","pieSlices","shape","d","a","arcs","path","index","slice","extraProps","event","child","React","animateDuration","ProgressCircle","PropTypes","style","strokeWidth","startAngle","endAngle","animate","number"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react'\nimport { View } from 'react-native'\nimport PropTypes from 'prop-types'\nimport * as shape from 'd3-shape'\nimport Path from './animated-path'\nimport Svg, { G } from 'react-native-svg'\n\nclass ProgressCircle extends PureComponent {\n    state = {\n        height: 0,\n        width: 0,\n    }\n\n    _onLayout(event) {\n        const {\n            nativeEvent: {\n                layout: { height, width },\n            },\n        } = event\n        this.setState({ height, width })\n    }\n\n    render() {\n        const {\n            style,\n            progressColor,\n            backgroundColor,\n            strokeWidth,\n            startAngle,\n            endAngle,\n            animate,\n            animateDuration,\n            children,\n            cornerRadius,\n        } = this.props\n\n        let { progress } = this.props\n\n        const { height, width } = this.state\n\n        const outerDiameter = Math.min(width, height)\n\n        if (!isFinite(progress) || isNaN(progress)) {\n            progress = 0\n        }\n\n        // important order to have progress render over \"rest\"\n        const data = [\n            {\n                key: 'rest',\n                value: 1 - progress,\n                color: backgroundColor,\n            },\n            {\n                key: 'progress',\n                value: progress,\n                color: progressColor,\n            },\n        ]\n\n        const pieSlices = shape\n            .pie()\n            .value((d) => d.value)\n            .sort((a) => (a.key === 'rest' ? 1 : -1))\n            .startAngle(startAngle)\n            .endAngle(endAngle)(data)\n\n        const arcs = pieSlices.map((slice, index) => ({\n            ...data[index],\n            ...slice,\n            path: shape\n                .arc()\n                .outerRadius(outerDiameter / 2) // Radius of the pie\n                .innerRadius(outerDiameter / 2 - strokeWidth) // Inner radius: to create a donut or pie\n                .startAngle(index === 0 ? startAngle : slice.startAngle)\n                .endAngle(index === 0 ? endAngle : slice.endAngle)\n                .cornerRadius(cornerRadius)(),\n        }))\n\n        const extraProps = {\n            width,\n            height,\n        }\n\n        return (\n            <View style={style} onLayout={(event) => this._onLayout(event)}>\n                {height > 0 && width > 0 && (\n                    <Svg style={{ height, width }}>\n                        {/* center the progress circle*/}\n                        <G x={width / 2} y={height / 2}>\n                            {React.Children.map(children, (child) => {\n                                if (child && child.props.belowChart) {\n                                    return React.cloneElement(child, extraProps)\n                                }\n                                return null\n                            })}\n                            {arcs.map((shape, index) => {\n                                return (\n                                    <Path\n                                        key={index}\n                                        fill={shape.color}\n                                        d={shape.path}\n                                        animate={animate}\n                                        animationDuration={animateDuration}\n                                    />\n                                )\n                            })}\n                            {React.Children.map(children, (child) => {\n                                if (child && !child.props.belowChart) {\n                                    return React.cloneElement(child, extraProps)\n                                }\n                                return null\n                            })}\n                        </G>\n                    </Svg>\n                )}\n            </View>\n        )\n    }\n}\n\nProgressCircle.propTypes = {\n    progress: PropTypes.number.isRequired,\n    style: PropTypes.any,\n    progressColor: PropTypes.any,\n    backgroundColor: PropTypes.any,\n    strokeWidth: PropTypes.number,\n    startAngle: PropTypes.number,\n    endAngle: PropTypes.number,\n    animate: PropTypes.bool,\n    cornerRadius: PropTypes.number,\n    animateDuration: PropTypes.number,\n}\n\nProgressCircle.defaultProps = {\n    progressColor: 'black',\n    backgroundColor: '#ECECEC',\n    strokeWidth: 5,\n    startAngle: 0,\n    endAngle: Math.PI * 2,\n    cornerRadius: 45,\n}\n\nexport default ProgressCircle\n"]},"metadata":{},"sourceType":"module"}