{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport * as array from 'd3-array';\nimport * as scale from 'd3-scale';\nimport * as shape from 'd3-shape';\nimport PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Svg from 'react-native-svg';\nimport Path from \"../animated-path\";\n\nvar BarChart = function (_PureComponent) {\n  _inherits(BarChart, _PureComponent);\n\n  var _super = _createSuper(BarChart);\n\n  function BarChart() {\n    var _this;\n\n    _classCallCheck(this, BarChart);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      width: 0,\n      height: 0\n    });\n\n    return _this;\n  }\n\n  _createClass(BarChart, [{\n    key: \"_onLayout\",\n    value: function _onLayout(event) {\n      var _event$nativeEvent$la = event.nativeEvent.layout,\n          height = _event$nativeEvent$la.height,\n          width = _event$nativeEvent$la.width;\n      this.setState({\n        height: height,\n        width: width\n      });\n    }\n  }, {\n    key: \"calcXScale\",\n    value: function calcXScale(domain) {\n      var _this$props = this.props,\n          horizontal = _this$props.horizontal,\n          _this$props$contentIn = _this$props.contentInset,\n          _this$props$contentIn2 = _this$props$contentIn.left,\n          left = _this$props$contentIn2 === void 0 ? 0 : _this$props$contentIn2,\n          _this$props$contentIn3 = _this$props$contentIn.right,\n          right = _this$props$contentIn3 === void 0 ? 0 : _this$props$contentIn3,\n          spacingInner = _this$props.spacingInner,\n          spacingOuter = _this$props.spacingOuter,\n          clamp = _this$props.clamp;\n      var width = this.state.width;\n\n      if (horizontal) {\n        return scale.scaleLinear().domain(domain).range([left, width - right]).clamp(clamp);\n      }\n\n      return scale.scaleBand().domain(domain).range([left, width - right]).paddingInner([spacingInner]).paddingOuter([spacingOuter]);\n    }\n  }, {\n    key: \"calcYScale\",\n    value: function calcYScale(domain) {\n      var _this$props2 = this.props,\n          horizontal = _this$props2.horizontal,\n          _this$props2$contentI = _this$props2.contentInset,\n          _this$props2$contentI2 = _this$props2$contentI.top,\n          top = _this$props2$contentI2 === void 0 ? 0 : _this$props2$contentI2,\n          _this$props2$contentI3 = _this$props2$contentI.bottom,\n          bottom = _this$props2$contentI3 === void 0 ? 0 : _this$props2$contentI3,\n          spacingInner = _this$props2.spacingInner,\n          spacingOuter = _this$props2.spacingOuter,\n          clamp = _this$props2.clamp;\n      var height = this.state.height;\n\n      if (horizontal) {\n        return scale.scaleBand().domain(domain).range([top, height - bottom]).paddingInner([spacingInner]).paddingOuter([spacingOuter]);\n      }\n\n      return scale.scaleLinear().domain(domain).range([height - bottom, top]).clamp(clamp);\n    }\n  }, {\n    key: \"calcAreas\",\n    value: function calcAreas(x, y) {\n      var _this$props3 = this.props,\n          horizontal = _this$props3.horizontal,\n          data = _this$props3.data,\n          yAccessor = _this$props3.yAccessor;\n      var values = data.map(function (item) {\n        return yAccessor({\n          item: item\n        });\n      });\n\n      if (horizontal) {\n        return data.map(function (bar, index) {\n          return {\n            bar: bar,\n            path: shape.area().y(function (value, _index) {\n              return _index === 0 ? y(index) : y(index) + y.bandwidth();\n            }).x0(x(0)).x1(function (value) {\n              return x(value);\n            }).defined(function (value) {\n              return typeof value === 'number';\n            })([values[index], values[index]])\n          };\n        });\n      }\n\n      return data.map(function (bar, index) {\n        return {\n          bar: bar,\n          path: shape.area().y0(y(0)).y1(function (value) {\n            return y(value);\n          }).x(function (value, _index) {\n            return _index === 0 ? x(index) : x(index) + x.bandwidth();\n          }).defined(function (value) {\n            return typeof value === 'number';\n          })([values[index], values[index]])\n        };\n      });\n    }\n  }, {\n    key: \"calcExtent\",\n    value: function calcExtent() {\n      var _this$props4 = this.props,\n          data = _this$props4.data,\n          gridMin = _this$props4.gridMin,\n          gridMax = _this$props4.gridMax,\n          yAccessor = _this$props4.yAccessor;\n      var values = data.map(function (obj) {\n        return yAccessor({\n          item: obj\n        });\n      });\n      var extent = array.extent([].concat(_toConsumableArray(values), [gridMax, gridMin]));\n      var _this$props5 = this.props,\n          _this$props5$yMin = _this$props5.yMin,\n          yMin = _this$props5$yMin === void 0 ? extent[0] : _this$props5$yMin,\n          _this$props5$yMax = _this$props5.yMax,\n          yMax = _this$props5$yMax === void 0 ? extent[1] : _this$props5$yMax;\n      return [yMin, yMax];\n    }\n  }, {\n    key: \"calcIndexes\",\n    value: function calcIndexes() {\n      var data = this.props.data;\n      return data.map(function (_, index) {\n        return index;\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props6 = this.props,\n          data = _this$props6.data,\n          animate = _this$props6.animate,\n          animationDuration = _this$props6.animationDuration,\n          style = _this$props6.style,\n          numberOfTicks = _this$props6.numberOfTicks,\n          svg = _this$props6.svg,\n          horizontal = _this$props6.horizontal,\n          children = _this$props6.children;\n      var _this$state = this.state,\n          height = _this$state.height,\n          width = _this$state.width;\n\n      if (data.length === 0) {\n        return React.createElement(View, {\n          style: style\n        });\n      }\n\n      var extent = this.calcExtent();\n      var indexes = this.calcIndexes();\n      var ticks = array.ticks(extent[0], extent[1], numberOfTicks);\n      var xDomain = horizontal ? extent : indexes;\n      var yDomain = horizontal ? indexes : extent;\n      var x = this.calcXScale(xDomain);\n      var y = this.calcYScale(yDomain);\n      var bandwidth = horizontal ? y.bandwidth() : x.bandwidth();\n      var areas = this.calcAreas(x, y).filter(function (area) {\n        return area.bar !== null && area.bar !== undefined && area.path !== null;\n      });\n      var extraProps = {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        bandwidth: bandwidth,\n        ticks: ticks,\n        data: data\n      };\n      return React.createElement(View, {\n        style: style\n      }, React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        onLayout: function onLayout(event) {\n          return _this2._onLayout(event);\n        }\n      }, height > 0 && width > 0 && React.createElement(Svg, {\n        style: {\n          height: height,\n          width: width\n        }\n      }, React.Children.map(children, function (child) {\n        if (child && child.props.belowChart) {\n          return React.cloneElement(child, extraProps);\n        }\n      }), areas.map(function (area, index) {\n        var _area$bar$svg = area.bar.svg,\n            barSvg = _area$bar$svg === void 0 ? {} : _area$bar$svg,\n            path = area.path;\n        return React.createElement(Path, _extends({\n          key: index\n        }, svg, barSvg, {\n          d: path,\n          animate: animate,\n          animationDuration: animationDuration\n        }));\n      }), React.Children.map(children, function (child) {\n        if (child && !child.props.belowChart) {\n          return React.cloneElement(child, extraProps);\n        }\n      }))));\n    }\n  }]);\n\n  return BarChart;\n}(PureComponent);\n\nBarChart.propTypes = {\n  data: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.object])).isRequired,\n  style: PropTypes.any,\n  spacingInner: PropTypes.number,\n  spacingOuter: PropTypes.number,\n  animate: PropTypes.bool,\n  animationDuration: PropTypes.number,\n  contentInset: PropTypes.shape({\n    top: PropTypes.number,\n    left: PropTypes.number,\n    right: PropTypes.number,\n    bottom: PropTypes.number\n  }),\n  numberOfTicks: PropTypes.number,\n  gridMin: PropTypes.number,\n  gridMax: PropTypes.number,\n  svg: PropTypes.object,\n  yMin: PropTypes.any,\n  yMax: PropTypes.any,\n  clamp: PropTypes.bool\n};\nBarChart.defaultProps = {\n  spacingInner: 0.05,\n  spacingOuter: 0.05,\n  contentInset: {},\n  numberOfTicks: 10,\n  svg: {},\n  yAccessor: function yAccessor(_ref) {\n    var item = _ref.item;\n    return item;\n  }\n};\nexport default BarChart;","map":{"version":3,"sources":["bar-chart.js"],"names":["width","height","_onLayout","nativeEvent","layout","calcXScale","contentInset","left","right","clamp","scale","calcYScale","top","bottom","calcAreas","yAccessor","values","item","bar","path","shape","_index","y","x","value","calcExtent","obj","extent","array","yMin","yMax","calcIndexes","data","render","children","style","indexes","ticks","xDomain","horizontal","yDomain","bandwidth","areas","area","extraProps","flex","event","child","React","svg","barSvg","index","animationDuration","BarChart","PropTypes","spacingInner","spacingOuter","animate","number","numberOfTicks","gridMin","gridMax","bool"],"mappings":"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","sourcesContent":["import * as array from 'd3-array'\nimport * as scale from 'd3-scale'\nimport * as shape from 'd3-shape'\nimport PropTypes from 'prop-types'\nimport React, { PureComponent } from 'react'\nimport { View } from 'react-native'\nimport Svg from 'react-native-svg'\nimport Path from '../animated-path'\n\nclass BarChart extends PureComponent {\n    state = {\n        width: 0,\n        height: 0,\n    }\n\n    _onLayout(event) {\n        const {\n            nativeEvent: {\n                layout: { height, width },\n            },\n        } = event\n        this.setState({ height, width })\n    }\n\n    calcXScale(domain) {\n        const {\n            horizontal,\n            contentInset: { left = 0, right = 0 },\n            spacingInner,\n            spacingOuter,\n            clamp,\n        } = this.props\n\n        const { width } = this.state\n\n        if (horizontal) {\n            return scale\n                .scaleLinear()\n                .domain(domain)\n                .range([left, width - right])\n                .clamp(clamp)\n        }\n\n        return scale\n            .scaleBand()\n            .domain(domain)\n            .range([left, width - right])\n            .paddingInner([spacingInner])\n            .paddingOuter([spacingOuter])\n    }\n\n    calcYScale(domain) {\n        const {\n            horizontal,\n            contentInset: { top = 0, bottom = 0 },\n            spacingInner,\n            spacingOuter,\n            clamp,\n        } = this.props\n\n        const { height } = this.state\n\n        if (horizontal) {\n            return scale\n                .scaleBand()\n                .domain(domain)\n                .range([top, height - bottom])\n                .paddingInner([spacingInner])\n                .paddingOuter([spacingOuter])\n        }\n\n        return scale\n            .scaleLinear()\n            .domain(domain)\n            .range([height - bottom, top])\n            .clamp(clamp)\n    }\n\n    calcAreas(x, y) {\n        const { horizontal, data, yAccessor } = this.props\n\n        const values = data.map((item) => yAccessor({ item }))\n\n        if (horizontal) {\n            return data.map((bar, index) => ({\n                bar,\n                path: shape\n                    .area()\n                    .y((value, _index) => (_index === 0 ? y(index) : y(index) + y.bandwidth()))\n                    .x0(x(0))\n                    .x1((value) => x(value))\n                    .defined((value) => typeof value === 'number')([values[index], values[index]]),\n            }))\n        }\n\n        return data.map((bar, index) => ({\n            bar,\n            path: shape\n                .area()\n                .y0(y(0))\n                .y1((value) => y(value))\n                .x((value, _index) => (_index === 0 ? x(index) : x(index) + x.bandwidth()))\n                .defined((value) => typeof value === 'number')([values[index], values[index]]),\n        }))\n    }\n\n    calcExtent() {\n        const { data, gridMin, gridMax, yAccessor } = this.props\n        const values = data.map((obj) => yAccessor({ item: obj }))\n\n        const extent = array.extent([...values, gridMax, gridMin])\n\n        const { yMin = extent[0], yMax = extent[1] } = this.props\n\n        return [yMin, yMax]\n    }\n\n    calcIndexes() {\n        const { data } = this.props\n        return data.map((_, index) => index)\n    }\n\n    render() {\n        const { data, animate, animationDuration, style, numberOfTicks, svg, horizontal, children } = this.props\n\n        const { height, width } = this.state\n\n        if (data.length === 0) {\n            return <View style={style} />\n        }\n\n        const extent = this.calcExtent()\n        const indexes = this.calcIndexes()\n        const ticks = array.ticks(extent[0], extent[1], numberOfTicks)\n\n        const xDomain = horizontal ? extent : indexes\n        const yDomain = horizontal ? indexes : extent\n\n        const x = this.calcXScale(xDomain)\n        const y = this.calcYScale(yDomain)\n\n        const bandwidth = horizontal ? y.bandwidth() : x.bandwidth()\n\n        const areas = this.calcAreas(x, y).filter(\n            (area) => area.bar !== null && area.bar !== undefined && area.path !== null\n        )\n\n        const extraProps = {\n            x,\n            y,\n            width,\n            height,\n            bandwidth,\n            ticks,\n            data,\n        }\n\n        return (\n            <View style={style}>\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\n                    {height > 0 && width > 0 && (\n                        <Svg style={{ height, width }}>\n                            {React.Children.map(children, (child) => {\n                                if (child && child.props.belowChart) {\n                                    return React.cloneElement(child, extraProps)\n                                }\n                            })}\n                            {areas.map((area, index) => {\n                                const {\n                                    bar: { svg: barSvg = {} },\n                                    path,\n                                } = area\n\n                                return (\n                                    <Path\n                                        key={index}\n                                        {...svg}\n                                        {...barSvg}\n                                        d={path}\n                                        animate={animate}\n                                        animationDuration={animationDuration}\n                                    />\n                                )\n                            })}\n                            {React.Children.map(children, (child) => {\n                                if (child && !child.props.belowChart) {\n                                    return React.cloneElement(child, extraProps)\n                                }\n                            })}\n                        </Svg>\n                    )}\n                </View>\n            </View>\n        )\n    }\n}\n\nBarChart.propTypes = {\n    data: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.object])).isRequired,\n    style: PropTypes.any,\n    spacingInner: PropTypes.number,\n    spacingOuter: PropTypes.number,\n    animate: PropTypes.bool,\n    animationDuration: PropTypes.number,\n    contentInset: PropTypes.shape({\n        top: PropTypes.number,\n        left: PropTypes.number,\n        right: PropTypes.number,\n        bottom: PropTypes.number,\n    }),\n    numberOfTicks: PropTypes.number,\n    gridMin: PropTypes.number,\n    gridMax: PropTypes.number,\n    svg: PropTypes.object,\n\n    yMin: PropTypes.any,\n    yMax: PropTypes.any,\n    clamp: PropTypes.bool,\n}\n\nBarChart.defaultProps = {\n    spacingInner: 0.05,\n    spacingOuter: 0.05,\n    contentInset: {},\n    numberOfTicks: 10,\n    svg: {},\n    yAccessor: ({ item }) => item,\n}\n\nexport default BarChart\n"]},"metadata":{},"sourceType":"module"}