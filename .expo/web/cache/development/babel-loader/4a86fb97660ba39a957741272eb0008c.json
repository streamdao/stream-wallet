{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React, { PureComponent } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport PropTypes from 'prop-types';\nimport * as shape from 'd3-shape';\nimport Svg, { G, Path } from 'react-native-svg';\n\nvar PieChart = function (_PureComponent) {\n  _inherits(PieChart, _PureComponent);\n\n  var _super = _createSuper(PieChart);\n\n  function PieChart() {\n    var _this;\n\n    _classCallCheck(this, PieChart);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      height: 0,\n      width: 0\n    });\n\n    return _this;\n  }\n\n  _createClass(PieChart, [{\n    key: \"_onLayout\",\n    value: function _onLayout(event) {\n      var _event$nativeEvent$la = event.nativeEvent.layout,\n          height = _event$nativeEvent$la.height,\n          width = _event$nativeEvent$la.width;\n      this.setState({\n        height: height,\n        width: width\n      });\n    }\n  }, {\n    key: \"_calculateRadius\",\n    value: function _calculateRadius(arg, max, defaultVal) {\n      if (typeof arg === 'string') {\n        return arg.split('%')[0] / 100 * max;\n      } else if (arg) {\n        return arg;\n      } else {\n        return defaultVal;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          data = _this$props.data,\n          dataPoints = _this$props.dataPoints,\n          innerRadius = _this$props.innerRadius,\n          outerRadius = _this$props.outerRadius,\n          labelRadius = _this$props.labelRadius,\n          padAngle = _this$props.padAngle,\n          animate = _this$props.animate,\n          animationDuration = _this$props.animationDuration,\n          style = _this$props.style,\n          sort = _this$props.sort,\n          valueAccessor = _this$props.valueAccessor,\n          children = _this$props.children,\n          startAngle = _this$props.startAngle,\n          endAngle = _this$props.endAngle;\n      var _this$state = this.state,\n          height = _this$state.height,\n          width = _this$state.width;\n\n      if (!data && dataPoints) {\n        throw \"\\\"dataPoints\\\" have been renamed to \\\"data\\\" to better reflect the fact that it's an array of objects\";\n      }\n\n      if (data.length === 0) {\n        return React.createElement(View, {\n          style: style\n        });\n      }\n\n      var maxRadius = Math.min(width, height) / 2;\n\n      if (Math.min.apply(Math, _toConsumableArray(data.map(function (obj) {\n        return valueAccessor({\n          item: obj\n        });\n      }))) < 0) {\n        console.error(\"don't pass negative numbers to pie-chart, it makes no sense!\");\n      }\n\n      var _outerRadius = this._calculateRadius(outerRadius, maxRadius, maxRadius);\n\n      var _innerRadius = this._calculateRadius(innerRadius, maxRadius, 0);\n\n      var _labelRadius = this._calculateRadius(labelRadius, maxRadius, _outerRadius);\n\n      if (outerRadius > 0 && _innerRadius >= outerRadius) {\n        console.warn('innerRadius is equal to or greater than outerRadius');\n      }\n\n      var arcs = data.map(function (item) {\n        var arc = shape.arc().outerRadius(_outerRadius).innerRadius(_innerRadius).padAngle(padAngle);\n        item.arc && Object.entries(item.arc).forEach(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n              key = _ref2[0],\n              value = _ref2[1];\n\n          if (typeof arc[key] === 'function') {\n            if (typeof value === 'string') {\n              arc[key](value.split('%')[0] / 100 * _outerRadius);\n            } else {\n              arc[key](value);\n            }\n          }\n        });\n        return arc;\n      });\n      var labelArcs = data.map(function (item, index) {\n        if (labelRadius) {\n          return shape.arc().outerRadius(_labelRadius).innerRadius(_labelRadius).padAngle(padAngle);\n        }\n\n        return arcs[index];\n      });\n      var pieSlices = shape.pie().value(function (d) {\n        return valueAccessor({\n          item: d\n        });\n      }).sort(sort).startAngle(startAngle).endAngle(endAngle)(data);\n      var slices = pieSlices.map(function (slice, index) {\n        return _objectSpread({}, slice, {\n          pieCentroid: arcs[index].centroid(slice),\n          labelCentroid: labelArcs[index].centroid(slice)\n        });\n      });\n      var extraProps = {\n        width: width,\n        height: height,\n        data: data,\n        slices: slices\n      };\n      return React.createElement(View, {\n        pointerEvents: 'box-none',\n        style: style\n      }, React.createElement(View, {\n        pointerEvents: 'box-none',\n        style: {\n          flex: 1\n        },\n        onLayout: function onLayout(event) {\n          return _this2._onLayout(event);\n        }\n      }, height > 0 && width > 0 && React.createElement(Svg, {\n        pointerEvents: Platform.OS === 'android' && 'box-none',\n        style: {\n          height: height,\n          width: width\n        }\n      }, React.createElement(G, {\n        x: width / 2,\n        y: height / 2\n      }, React.Children.map(children, function (child) {\n        if (child && child.props.belowChart) {\n          return React.cloneElement(child, extraProps);\n        }\n\n        return null;\n      }), pieSlices.map(function (slice, index) {\n        var _data$index = data[index],\n            key = _data$index.key,\n            onPress = _data$index.onPress,\n            svg = _data$index.svg;\n        return React.createElement(Path, _extends({\n          key: key,\n          onPress: onPress\n        }, svg, {\n          d: arcs[index](slice),\n          animate: animate,\n          animationDuration: animationDuration\n        }));\n      }), React.Children.map(children, function (child) {\n        if (child && !child.props.belowChart) {\n          return React.cloneElement(child, extraProps);\n        }\n\n        return null;\n      })))));\n    }\n  }]);\n\n  return PieChart;\n}(PureComponent);\n\nPieChart.propTypes = {\n  data: PropTypes.arrayOf(PropTypes.shape({\n    svg: PropTypes.object,\n    key: PropTypes.any.isRequired,\n    value: PropTypes.number,\n    arc: PropTypes.object\n  })).isRequired,\n  innerRadius: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  outerRadius: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  labelRadius: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  padAngle: PropTypes.number,\n  animate: PropTypes.bool,\n  animationDuration: PropTypes.number,\n  style: PropTypes.any,\n  sort: PropTypes.func,\n  valueAccessor: PropTypes.func\n};\nPieChart.defaultProps = {\n  width: 100,\n  height: 100,\n  padAngle: 0.05,\n  startAngle: 0,\n  endAngle: Math.PI * 2,\n  valueAccessor: function valueAccessor(_ref3) {\n    var item = _ref3.item;\n    return item.value;\n  },\n  innerRadius: '50%',\n  sort: function sort(a, b) {\n    return b.value - a.value;\n  }\n};\nexport default PieChart;","map":{"version":3,"sources":["pie-chart.js"],"names":["height","width","_onLayout","nativeEvent","layout","_calculateRadius","arg","render","endAngle","data","style","maxRadius","Math","obj","valueAccessor","item","console","_outerRadius","_innerRadius","_labelRadius","outerRadius","arcs","arc","shape","value","labelArcs","pieSlices","d","slices","pieCentroid","labelCentroid","extraProps","flex","event","Platform","child","React","svg","onPress","animationDuration","PieChart","PropTypes","key","object","innerRadius","labelRadius","padAngle","animate","sort","func","startAngle","b","a"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react'\nimport { View, Platform } from 'react-native'\nimport PropTypes from 'prop-types'\nimport * as shape from 'd3-shape'\nimport Svg, { G, Path } from 'react-native-svg'\n\nclass PieChart extends PureComponent {\n    state = {\n        height: 0,\n        width: 0,\n    }\n\n    _onLayout(event) {\n        const {\n            nativeEvent: {\n                layout: { height, width },\n            },\n        } = event\n\n        this.setState({ height, width })\n    }\n\n    _calculateRadius(arg, max, defaultVal) {\n        if (typeof arg === 'string') {\n            return (arg.split('%')[0] / 100) * max\n        } else if (arg) {\n            return arg\n        } else {\n            return defaultVal\n        }\n    }\n\n    render() {\n        const {\n            data,\n            dataPoints,\n            innerRadius,\n            outerRadius,\n            labelRadius,\n            padAngle,\n            animate,\n            animationDuration,\n            style,\n            sort,\n            valueAccessor,\n            children,\n            startAngle,\n            endAngle,\n        } = this.props\n\n        const { height, width } = this.state\n\n        if (!data && dataPoints) {\n            throw `\"dataPoints\" have been renamed to \"data\" to better reflect the fact that it's an array of objects`\n        }\n\n        if (data.length === 0) {\n            return <View style={style} />\n        }\n\n        const maxRadius = Math.min(width, height) / 2\n\n        if (Math.min(...data.map((obj) => valueAccessor({ item: obj }))) < 0) {\n            console.error(\"don't pass negative numbers to pie-chart, it makes no sense!\")\n        }\n\n        const _outerRadius = this._calculateRadius(outerRadius, maxRadius, maxRadius)\n        const _innerRadius = this._calculateRadius(innerRadius, maxRadius, 0)\n        const _labelRadius = this._calculateRadius(labelRadius, maxRadius, _outerRadius)\n\n        if (outerRadius > 0 && _innerRadius >= outerRadius) {\n            console.warn('innerRadius is equal to or greater than outerRadius')\n        }\n\n        const arcs = data.map((item) => {\n            const arc = shape\n                .arc()\n                .outerRadius(_outerRadius)\n                .innerRadius(_innerRadius)\n                .padAngle(padAngle) // Angle between sections\n\n            item.arc &&\n                Object.entries(item.arc).forEach(([key, value]) => {\n                    if (typeof arc[key] === 'function') {\n                        if (typeof value === 'string') {\n                            arc[key]((value.split('%')[0] / 100) * _outerRadius)\n                        } else {\n                            arc[key](value)\n                        }\n                    }\n                })\n\n            return arc\n        })\n\n        const labelArcs = data.map((item, index) => {\n            if (labelRadius) {\n                return shape\n                    .arc()\n                    .outerRadius(_labelRadius)\n                    .innerRadius(_labelRadius)\n                    .padAngle(padAngle)\n            }\n            return arcs[index]\n        })\n\n        const pieSlices = shape\n            .pie()\n            .value((d) => valueAccessor({ item: d }))\n            .sort(sort)\n            .startAngle(startAngle)\n            .endAngle(endAngle)(data)\n\n        const slices = pieSlices.map((slice, index) => ({\n            ...slice,\n            pieCentroid: arcs[index].centroid(slice),\n            labelCentroid: labelArcs[index].centroid(slice),\n        }))\n\n        const extraProps = {\n            width,\n            height,\n            data,\n            slices,\n        }\n\n        return (\n            <View pointerEvents={'box-none'} style={style}>\n                <View pointerEvents={'box-none'} style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\n                    {height > 0 && width > 0 && (\n                        <Svg pointerEvents={Platform.OS === 'android' && 'box-none'} style={{ height, width }}>\n                            {/* center the progress circle*/}\n                            <G x={width / 2} y={height / 2}>\n                                {React.Children.map(children, (child) => {\n                                    if (child && child.props.belowChart) {\n                                        return React.cloneElement(child, extraProps)\n                                    }\n                                    return null\n                                })}\n                                {pieSlices.map((slice, index) => {\n                                    const { key, onPress, svg } = data[index]\n                                    return (\n                                        <Path\n                                            key={key}\n                                            onPress={onPress}\n                                            {...svg}\n                                            d={arcs[index](slice)}\n                                            animate={animate}\n                                            animationDuration={animationDuration}\n                                        />\n                                    )\n                                })}\n                                {React.Children.map(children, (child) => {\n                                    if (child && !child.props.belowChart) {\n                                        return React.cloneElement(child, extraProps)\n                                    }\n                                    return null\n                                })}\n                            </G>\n                        </Svg>\n                    )}\n                </View>\n            </View>\n        )\n    }\n}\n\nPieChart.propTypes = {\n    data: PropTypes.arrayOf(\n        PropTypes.shape({\n            svg: PropTypes.object,\n            key: PropTypes.any.isRequired,\n            value: PropTypes.number,\n            arc: PropTypes.object,\n        })\n    ).isRequired,\n    innerRadius: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    outerRadius: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    labelRadius: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    padAngle: PropTypes.number,\n    animate: PropTypes.bool,\n    animationDuration: PropTypes.number,\n    style: PropTypes.any,\n    sort: PropTypes.func,\n    valueAccessor: PropTypes.func,\n}\n\nPieChart.defaultProps = {\n    width: 100,\n    height: 100,\n    padAngle: 0.05,\n    startAngle: 0,\n    endAngle: Math.PI * 2,\n    valueAccessor: ({ item }) => item.value,\n    innerRadius: '50%',\n    sort: (a, b) => b.value - a.value,\n}\n\nexport default PieChart\n"]},"metadata":{},"sourceType":"module"}